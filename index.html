<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title data-lang="title">Dr.WEEE's World</title>
    <!-- Updated Google Font import -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <!-- Import a modern icon library (Feather Icons) -->
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <!-- Main Game Container -->
    <div class="game-wrapper" id="appContainer">

        <!-- AI Loading Spinner -->
        <div class="ai-loader-overlay" id="aiLoader">
            <div class="ai-loader-spinner"></div>
            <p id="aiLoaderText" data-lang="aiLoading">Loading...</p>
        </div>

        <!-- Main Menu Screen (Visible by default) -->
        <div class="game-screen" id="mainMenu">
            <div class="top-bar">
                <div class="currency-display">
                    <i data-feather="diamond"></i>
                    <span id="mainCurrency">1230</span>
                </div>
                <!-- Icons exactly as requested -->
                <div class="icon-buttons">
                    <button class="icon-btn" onclick="showLeaderboard()" aria-label="Leaderboard">
                        <i data-feather="bar-chart-2"></i>
                    </button>
                    <button class="icon-btn" onclick="showFriends()" aria-label="Friends">
                        <i data-feather="users"></i>
                    </button>
                    <button class="icon-btn" onclick="toggleSettings()" aria-label="Settings">
                        <i data-feather="settings"></i>
                    </button>
                </div>
            </div>
            
            <div class="menu-content">
                <!-- Title "ÙƒÙ„Ù…Ø§Øª" -->
                <h1 class="game-title-main" data-lang="gameTitle">Words</h1>
                
                <!-- Progress Bar -->
                <div class="progress-bar-container">
                    <div class="progress-labels">
                        <span data-lang="beginner">Beginner</span>
                        <span data-lang="expert">Expert</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-bar-inner" id="levelProgress" style="width: 18%;"></div>
                    </div>
                    <div class="progress-value" id="progressValue">18/100</div>
                </div>

                <!-- Main Menu Buttons -->
                <button class="menu-btn primary" id="continueBtn" onclick="startGame()">
                    <span data-lang="continueLevel">Level</span> 7
                </button>
                <button class="menu-btn secondary" onclick="toggleSettings(true)" data-lang="gameBackgrounds">
                    Game Backgrounds
                </button>
            </div>
        </div>

        <!-- Word Puzzle Screen (Hidden by default) -->
        <div class="game-screen" id="gameContainer" style="display: none;">
            <div class="top-bar">
                <div class="currency-display">
                    <i data-feather="diamond"></i>
                    <span id="gameCurrency">1230</span>
                </div>
                <!-- Level Title -->
                <h2 class="game-level-title" id="gameLevelTitle">
                    <span data-lang="level">Level</span> 7
                </h2>
                <!-- Home Button -->
                <div class="icon-buttons">
                    <button class="icon-btn" onclick="backToMenu()" aria-label="Home">
                        <i data-feather="home"></i>
                    </button>
                </div>
            </div>

            <div class="puzzle-content">
                <!-- Hint Box -->
                <div class="hint-box" id="gameHint">
                    ...
                </div>
                
                <!-- Answer Boxes (Will be empty) -->
                <div class="answer-boxes" id="answerBoxes">
                    <!-- Letter boxes for the answer will be generated here -->
                </div>
                
                <!-- Letter Grid (3 columns) -->
                <div class="letter-grid" id="letterGrid">
                    <!-- 12 letter tiles will be generated here -->
                </div>

                <!-- Footer with Hints -->
                <div class="game-footer">
                    <button class="power-up-btn" id="powerHintBtn" onclick="usePowerHint()">
                        <i data-feather="zap"></i> <!-- "Fire" icon -->
                        <span>150</span>
                    </button>
                    <a href="#" class="report-link" data-lang="reportProblem">Report a problem</a>
                    <button class="power-up-btn" id="hintBtn" onclick="useHint()">
                        <i data-feather="help-circle"></i> <!-- "Wand" icon -->
                        <span>50</span>
                    </button>
                </div>
            </div>
        </div>

    </div> <!-- End .game-wrapper -->

    <!-- Pop-up Panels (Same as before, but will match style) -->

    <!-- Settings Panel -->
    <div class="panel-overlay" id="settingsPanel" style="display: none;">
        <div class="panel-content">
            <h2 data-lang="settings">Settings</h2>
            
            <div class="setting-item">
                <label class="setting-label" data-lang="musicVolume">Music Volume</label>
                <input type="range" class="volume-slider" id="musicVolume" min="0" max="100" value="50">
            </div>
            <div class="setting-item">
                <label class="setting-label" data-lang="sfxVolume">SFX Volume</label>
                <input type="range" class="volume-slider" id="sfxVolume" min="0" max="100" value="70">
            </div>
            
            <div class="setting-item">
                <label class="setting-label" data-lang="playerName">Player Name</label>
                <input type="text" class="name-input" id="playerNameInput" placeholder="Enter your name" maxlength="20">
            </div>

            <div class="setting-item" id="backgroundSettings">
                <label class="setting-label" data-lang="chooseBackground">Choose Background</label>
                <div class="background-options" id="backgroundOptions">
                    <!-- Populated by JS -->
                </div>
            </div>

            <button class="panel-btn" onclick="toggleSettings()" data-lang="close">Close</button>
        </div>
    </div>

    <!-- Friends Panel -->
    <div class="panel-overlay" id="friendsPanel" style="display: none;">
        <div class="panel-content">
            <h2 data-lang="friends">Friends</h2>
            <div class="setting-item">
                <label class="setting-label" data-lang="yourCode">Your Player Code</label>
                <div class="player-code" id="playerCode">LOADING...</div>
            </div>
            <div class="setting-item">
                <label class="setting-label" data-lang="addFriend">Add Friend by Code</label>
                <input type="text" class="name-input" id="friendCodeInput" placeholder="Enter friend code" maxlength="8">
                <button class="panel-btn primary" onclick="addFriend()" data-lang="add">Add Friend</button>
            </div>
            <div class="friends-list" id="friendsList"></div>
            <button class="panel-btn" onclick="closeFriends()" data-lang="close">Close</button>
        </div>
    </div>

    <!-- Leaderboard Panel -->
    <div class="panel-overlay" id="leaderboardPanel" style="display: none;">
        <div class="panel-content">
            <h2 data-lang="leaderboard">Leaderboard</h2>
            <div class="friends-list" id="leaderboardEntries">
                <!-- Leaderboard entries will be populated here -->
            </div>
            <button class="panel-btn" onclick="closeLeaderboard()" data-lang="close">Close</button>
        </div>
    </div>

    <!-- Level Complete Panel -->
    <div class="panel-overlay" id="levelCompletePanel" style="display: none;">
        <div class="panel-content">
            <h2>ðŸŽ‰</h2>
            <h2 data-lang="levelComplete">Level Complete!</h2>
            <p data-lang="greatJob">Great job!</p>
            <button class="panel-btn primary" onclick="nextLevel()" data-lang="continueNext">Continue</button>
        </div>
    </div>

    <!-- Game Over/Error Panel -->
    <div class="panel-overlay" id="gameOverPanel" style="display: none;">
        <div class="panel-content">
            <h2>ðŸ˜¢</h2>
            <h2 data-lang="aiErrorTitle">Error</h2>
            <p id="gameOverTip" data-lang="aiError">Could not load puzzle. Please try again.</p>
            <button class="panel-btn danger" onclick="retryGame()" data-lang="tryAgain">Try Again</button>
            <button class="panel-btn" onclick="backToMenu()" data-lang="mainMenu">Main Menu</button>
        </div>
    </div>

    <!-- This script tag must be at the end of <body> -->
    <script src="script.js"></script>
</body>
</html>
